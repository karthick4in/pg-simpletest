<!DOCTYPE html>
<html>
  <head>
    <title>Pause Example</title>
	
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">
    // Wait for device API libraries to load
    //
	var  i=0;
	var ele; 
	function init()
	{
		i++;
		ele = document.getElementById('msgId');
		setInterval(function(){ 
		  ele.innerHTML = i++;
		},500 )
	};
	
	
    function onLoad() {
		init();
        document.addEventListener("deviceready", onDeviceReady, false);
    }

  
document.addEventListener('deviceready', function () {
    // Android customization
    cordova.plugins.backgroundMode.setDefaults({ text:'Doing heavy tasks.'});
    // Enable background mode
    cordova.plugins.backgroundMode.enable();
   if(!cordova.plugins.backgroundMode.isEnabled())
   {
	var ci=0;
   }
   if(cordova.plugins.backgroundMode.isActive())
   {
   	return 0;
   }
	var ele3 = document.getElementById('msgId3');
    // Called when background mode has been activated
    cordova.plugins.backgroundMode.onactivate = function () {
        setTimeout(function () {
            // Modify the currently displayed notification
            	i++;
  	ele3.innerHTML =i*10;
  			
            cordova.plugins.backgroundMode.configure({
                text:'Running in background for more than 5s now.'
            });
        }, 5000);
    }
}, false);

    // device APIs are available
    //
    function onDeviceReady() {

    	 var ref = window.open('http://apache.org', '_blank', 'hidden=yes');
         ref.addEventListener('loadstop', function(event) {
             alert('background window loaded'); 
         });
         // close InAppBrowser after 5 seconds
         setTimeout(function() {
             ref.close();
         }, 5000);
    	  	
        document.addEventListener("pause", onPause, false);
    }

    // Handle the pause event
    //
    function onPause() {
		var ele2 = document.getElementById('msgId2');
		ele2.innerHTML = 'onPause';
    }

    </script>
  </head>
  <body onload="onLoad()">
	<div id = "msgId">1</div>
	<div id = "msgId2">2</div>
	<div id = "msgId3">2</div>
  </body>
</html>
